{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{BrowserRouter as Router,Routes,Route,Link,useParams}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductList=_ref=>{let{products}=_ref;if(!products||products.length===0){return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-8 text-gray-600\",children:\"No products found.\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mt-8\",children:products.map(p=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-md rounded-lg p-4 flex flex-col items-center relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:p.image,alt:p.title,className:\"w-40 h-auto mb-4 rounded-md\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-center mt-2\",children:p.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 font-bold my-2\",children:p.price}),/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(p.id),className:\"mt-auto bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-full transition duration-300 ease-in-out transform hover:scale-105\",children:\"View Product\"})]},p.id))});};const ProductPage=()=>{const{productId}=useParams();const[product,setProduct]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{setLoading(true);setError(null);fetch(\"/products.json\").then(res=>res.json()).then(data=>{if(data[productId]){setProduct(data[productId]);}else{setError(\"Product not found.\");}}).catch(err=>{console.error(\"Error loading product:\",err);setError(\"Could not load product.\");}).finally(()=>setLoading(false));},[productId]);if(loading)return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-10 text-xl text-blue-600\",children:\"Loading product details...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-10 text-xl text-red-500\",children:error});if(!product)return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-10 text-xl text-gray-600\",children:\"Product not found.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-2xl mx-auto mt-10 p-6 bg-white shadow-xl rounded-lg border-t-4 border-blue-500\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-extrabold text-gray-800 mb-4 text-center\",children:product.title}),/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.title,className:\"w-full max-w-xs mx-auto mb-6 rounded-lg shadow-md\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl text-green-700 font-bold mb-6 text-center\",children:product.price}),/*#__PURE__*/_jsx(\"a\",{href:product.url,target:\"_blank\",rel:\"noreferrer noopener\",className:\"block text-center bg-orange-600 hover:bg-orange-700 text-white py-3 px-6 rounded-full font-semibold text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-lg\",children:\"Buy on Amazon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-center text-gray-500 mt-4\",children:\"As an Amazon Associate, I earn from qualifying purchases.\"}),product.review&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 bg-yellow-50 p-5 rounded-lg border border-yellow-200 shadow-inner\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-800 italic leading-relaxed\",children:[\"\\\"\",product.review,\"\\\"\"]})})]});};function App(){const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchProducts=()=>{fetch(\"/products.json?t=\".concat(Date.now())).then(res=>res.json()).then(data=>{const newProducts=Object.values(data).reverse();setProducts(prev=>{if(JSON.stringify(prev)!==JSON.stringify(newProducts)){return newProducts;}return prev;});}).catch(err=>{console.error(\"Error loading products:\",err);setError(\"Failed to load products.\");}).finally(()=>setLoading(false));};setLoading(true);fetchProducts();const intervalId=setInterval(fetchProducts,1000000);return()=>clearInterval(intervalId);},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 font-sans text-gray-800\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto p-6\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"flex justify-between items-center mb-8 bg-white p-4 rounded-lg shadow-sm\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-extrabold text-blue-700\",children:\"Affiliate Products\"})}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-10 text-xl text-blue-600\",children:\"Loading products...\"}):error?/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-10 text-xl text-red-500\",children:error}):/*#__PURE__*/_jsx(ProductList,{products:products}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-center text-gray-500 mt-12 p-4 bg-white rounded-lg shadow-sm\",children:\"As an Amazon Associate, I earn from qualifying purchases.\"})]})}),/*#__PURE__*/_jsx(Route,{path:\"/product/:productId\",element:/*#__PURE__*/_jsx(ProductPage,{})})]})});}export default function RootApp(){return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(App,{})});}","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Link","useParams","jsx","_jsx","jsxs","_jsxs","ProductList","_ref","products","length","className","children","map","p","src","image","alt","title","price","to","concat","id","ProductPage","productId","product","setProduct","loading","setLoading","error","setError","fetch","then","res","json","data","catch","err","console","finally","href","url","target","rel","review","App","setProducts","fetchProducts","Date","now","newProducts","Object","values","reverse","prev","JSON","stringify","intervalId","setInterval","clearInterval","path","element","RootApp"],"sources":["C:/Users/jrbri/Documents/git/AmazonAffiliateApp/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Routes,\n  Route,\n  Link,\n  useParams,\n} from \"react-router-dom\";\n\nconst ProductList = ({ products }) => {\n  if (!products || products.length === 0) {\n    return <p className=\"text-center mt-8 text-gray-600\">No products found.</p>;\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mt-8\">\n      {products.map((p) => (\n        <div key={p.id} className=\"bg-white shadow-md rounded-lg p-4 flex flex-col items-center relative\">\n          <img src={p.image} alt={p.title} className=\"w-40 h-auto mb-4 rounded-md\" />\n          <h3 className=\"text-lg font-semibold text-center mt-2\">{p.title}</h3>\n          <p className=\"text-green-600 font-bold my-2\">{p.price}</p>\n          <Link\n            to={`/product/${p.id}`}\n            className=\"mt-auto bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-full transition duration-300 ease-in-out transform hover:scale-105\"\n          >\n            View Product\n          </Link>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nconst ProductPage = () => {\n  const { productId } = useParams();\n  const [product, setProduct] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    setLoading(true);\n    setError(null);\n\n    fetch(\"/products.json\")\n      .then((res) => res.json())\n      .then((data) => {\n        if (data[productId]) {\n          setProduct(data[productId]);\n        } else {\n          setError(\"Product not found.\");\n        }\n      })\n      .catch((err) => {\n        console.error(\"Error loading product:\", err);\n        setError(\"Could not load product.\");\n      })\n      .finally(() => setLoading(false));\n  }, [productId]);\n\n  if (loading) return <p className=\"text-center mt-10 text-xl text-blue-600\">Loading product details...</p>;\n  if (error) return <p className=\"text-center mt-10 text-xl text-red-500\">{error}</p>;\n  if (!product) return <p className=\"text-center mt-10 text-xl text-gray-600\">Product not found.</p>;\n\n  return (\n    <div className=\"max-w-2xl mx-auto mt-10 p-6 bg-white shadow-xl rounded-lg border-t-4 border-blue-500\">\n      <h2 className=\"text-3xl font-extrabold text-gray-800 mb-4 text-center\">{product.title}</h2>\n      <img src={product.image} alt={product.title} className=\"w-full max-w-xs mx-auto mb-6 rounded-lg shadow-md\" />\n      <p className=\"text-2xl text-green-700 font-bold mb-6 text-center\">{product.price}</p>\n      <a\n        href={product.url}\n        target=\"_blank\"\n        rel=\"noreferrer noopener\"\n        className=\"block text-center bg-orange-600 hover:bg-orange-700 text-white py-3 px-6 rounded-full font-semibold text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-lg\"\n      >\n        Buy on Amazon\n      </a>\n      <p className=\"text-xs text-center text-gray-500 mt-4\">\n        As an Amazon Associate, I earn from qualifying purchases.\n      </p>\n      {product.review && (\n        <div className=\"mt-8 bg-yellow-50 p-5 rounded-lg border border-yellow-200 shadow-inner\">\n          <p className=\"text-sm text-gray-800 italic leading-relaxed\">\"{product.review}\"</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction App() {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchProducts = () => {\n      fetch(`/products.json?t=${Date.now()}`)\n        .then((res) => res.json())\n        .then((data) => {\n          const newProducts = Object.values(data).reverse();\n          setProducts((prev) => {\n            if (JSON.stringify(prev) !== JSON.stringify(newProducts)) {\n              return newProducts;\n            }\n            return prev;\n          });\n        })\n        .catch((err) => {\n          console.error(\"Error loading products:\", err);\n          setError(\"Failed to load products.\");\n        })\n        .finally(() => setLoading(false));\n    };\n\n    setLoading(true);\n    fetchProducts();\n    const intervalId = setInterval(fetchProducts, 1000000);\n    return () => clearInterval(intervalId);\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 font-sans text-gray-800\">\n      <Routes>\n        <Route\n          path=\"/\"\n          element={\n            <div className=\"max-w-6xl mx-auto p-6\">\n              <header className=\"flex justify-between items-center mb-8 bg-white p-4 rounded-lg shadow-sm\">\n                <h1 className=\"text-3xl font-extrabold text-blue-700\">Affiliate Products</h1>\n              </header>\n              {loading ? (\n                <p className=\"text-center mt-10 text-xl text-blue-600\">Loading products...</p>\n              ) : error ? (\n                <p className=\"text-center mt-10 text-xl text-red-500\">{error}</p>\n              ) : (\n                <ProductList products={products} />\n              )}\n              <p className=\"text-xs text-center text-gray-500 mt-12 p-4 bg-white rounded-lg shadow-sm\">\n                As an Amazon Associate, I earn from qualifying purchases.\n              </p>\n            </div>\n          }\n        />\n        <Route path=\"/product/:productId\" element={<ProductPage />} />\n      </Routes>\n    </div>\n  );\n}\n\nexport default function RootApp() {\n  return (\n    <Router>\n      <App />\n    </Router>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}