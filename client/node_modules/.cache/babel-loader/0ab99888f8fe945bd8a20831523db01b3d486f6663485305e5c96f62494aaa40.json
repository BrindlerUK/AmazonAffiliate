{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{BrowserRouter as Router,Routes,Route,Link,useParams,useNavigate,useLocation}from\"react-router-dom\";// IMPORTANT: API_BASE_URL is set to your local network IP and backend port (8000).\n// This will ONLY work if the device accessing the React app (your phone, Mac)\n// is on the SAME WI-FI NETWORK as the computer running your FastAPI backend.\n//\n// If you want your website to work for people OFF your local network,\n// you MUST deploy your FastAPI backend to a public server (e.g., a VPS)\n// and update this URL to your public server's IP or domain (e.g., https://api.jamiesamazon.deals).\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL=\"http://192.168.0.156:8000\";// <--- Updated based on your local IP and backend port\n// Admin token for a simple login mechanism. In a real application,\n// this would be replaced by a more secure authentication system (e.g., JWT).\nconst ADMIN_TOKEN=\"letmein\";/**\n * ProductList Component\n * Displays a grid of product cards.\n * @param {Object} props - Component props.\n * @param {Array<Object>} props.products - An array of product objects to display.\n */const ProductList=_ref=>{let{products}=_ref;// If no products are available or the products array is empty, display a message.\nif(!products||products.length===0){return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-8 text-gray-600\",children:\"No products found. Add some from the Admin panel!\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mt-8\",children:products.map(p=>/*#__PURE__*/_jsxs(\"div\",{// Unique key for list rendering, important for React performance\nclassName:\"bg-white shadow-md rounded-lg p-4 flex flex-col items-center relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:p.image,alt:p.title,className:\"w-40 h-auto mb-4 rounded-md\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-center mt-2\",children:p.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 font-bold my-2\",children:p.price}),/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(p.id)// Link to the detailed product page\n,className:\"mt-auto bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-full transition duration-300 ease-in-out transform hover:scale-105\",children:\"View Product\"})]},p.id))});};/**\n * ProductPage Component\n * Displays detailed information for a single product.\n */const ProductPage=()=>{const{productId}=useParams();// Get product ID from URL parameters\nconst[product,setProduct]=useState(null);const[loading,setLoading]=useState(true);// State to manage loading status\nconst[error,setError]=useState(null);// State to manage error messages\nuseEffect(()=>{// Effect hook to fetch product data when component mounts or productId changes\nsetLoading(true);// Set loading to true before fetching\nsetError(null);// Clear any previous errors\naxios.get(\"\".concat(API_BASE_URL,\"/product/\").concat(productId)).then(res=>{// Check if the response contains an error field from the backend\nif(res.data&&res.data.error){setError(res.data.error);}else{setProduct(res.data);// Set product data if successful\n}}).catch(err=>{// Catch network or API call errors\nconsole.error(\"Error fetching product details:\",err);setError(\"Failed to load product details. Please try again later.\");}).finally(()=>{setLoading(false);// Set loading to false once fetch is complete (success or error)\n});},[productId]);// Dependency array: re-run effect if productId changes\n// Conditional rendering based on loading, error, or product data\nif(loading)return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-10 text-xl text-blue-600\",children:\"Loading product details...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-10 text-xl text-red-500\",children:error});if(!product)return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-10 text-xl text-gray-600\",children:\"Product not found.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-2xl mx-auto mt-10 p-6 bg-white shadow-xl rounded-lg border-t-4 border-blue-500\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-extrabold text-gray-800 mb-4 text-center\",children:product.title}),/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.title,className:\"w-full max-w-xs mx-auto mb-6 rounded-lg shadow-md\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl text-green-700 font-bold mb-6 text-center\",children:product.price}),/*#__PURE__*/_jsx(\"a\",{href:product.url,target:\"_blank\",rel:\"noreferrer noopener\"// Added noopener for security best practice\n,className:\"block text-center bg-orange-600 hover:bg-orange-700 text-white py-3 px-6 rounded-full font-semibold text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-lg\",children:\"Buy on Amazon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-center text-gray-500 mt-4\",children:\"As an Amazon Associate, I earn from qualifying purchases.\"}),product.review&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 bg-yellow-50 p-5 rounded-lg border border-yellow-200 shadow-inner\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-800 italic leading-relaxed\",children:[\"\\\"\",product.review,\"\\\"\"]})})]});};/**\n * AdminLogin Component\n * Provides a simple password-based login for the admin panel.\n */const AdminLogin=()=>{const[password,setPassword]=useState(\"\");const navigate=useNavigate();// Hook for programmatic navigation\nconst handleLogin=e=>{e.preventDefault();// Prevent default form submission\nif(password===ADMIN_TOKEN){// Navigate to admin panel, passing the token as a URL parameter\nnavigate(\"/admin?token=\"+ADMIN_TOKEN);}else{// Use an alert for simplicity, consider a custom modal for better UX\nalert(\"Incorrect password.\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto mt-20 p-8 bg-white shadow-xl rounded-lg border-t-4 border-purple-500\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-6 text-center\",children:\"Admin Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Enter admin password\",className:\"w-full border border-gray-300 px-4 py-3 rounded-lg focus:ring-2 focus:ring-purple-400 focus:border-transparent transition duration-200\",\"aria-label\":\"Admin Password\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-semibold text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-md\",children:\"Login\"})]})]});};/**\n * AdminPage Component\n * Allows adding and deleting products.\n * @param {Object} props - Component props.\n * @param {Function} props.setProducts - Function to update the main products state in App.\n */const AdminPage=_ref2=>{let{setProducts}=_ref2;const[link,setLink]=useState(\"\");const[message,setMessage]=useState(\"\");// Feedback message for user actions\nconst[localProducts,setLocalProducts]=useState([]);// Products specific to admin view\nconst[loading,setLoading]=useState(true);// Loading state for admin products\nconst[error,setError]=useState(null);// Error state for admin products\n/**\n   * Fetches products from the backend for the admin panel.\n   */const fetchProducts=async()=>{setLoading(true);setError(null);try{const res=await axios.get(\"\".concat(API_BASE_URL,\"/products\"));// Validate that the response data is an array\nif(Array.isArray(res.data)){setLocalProducts(res.data);// Update local state for admin view\nsetProducts(res.data);// Update global state for main product list\n}else{console.error(\"Backend /products did not return an array for admin panel:\",res.data);setError(\"Error: Expected product list but received unexpected data.\");setLocalProducts([]);// Ensure array is empty to prevent rendering errors\n}}catch(err){console.error(\"Failed to fetch products for admin panel:\",err);setError(\"Failed to load products. Check server connection and console for details.\");}finally{setLoading(false);}};// Effect hook to fetch products when the component mounts\nuseEffect(()=>{fetchProducts();},[]);// Empty dependency array means this runs once on mount\n/**\n   * Handles submission of a new product link.\n   * @param {Event} e - The form submission event.\n   */const handleSubmit=async e=>{e.preventDefault();if(!link){setMessage(\"Please enter an Amazon product URL.\");return;}setMessage(\"Adding product... This may take a moment as the product details are being fetched.\");// Provide immediate feedback\ntry{const res=await axios.post(\"\".concat(API_BASE_URL,\"/add-product\"),{url:link});if(res.data&&!res.data.error){// Add new product to the beginning of the list\nsetLocalProducts(prev=>[res.data,...prev]);setProducts(prev=>[res.data,...prev]);setLink(\"\");// Clear the input field\nsetMessage(\"✅ Product added successfully!\");}else{// Display specific error message from backend if available\nsetMessage(\"\\u274C Failed to add product: \".concat(res.data.detail||res.data.error||'Unknown error'));}}catch(err){setMessage(\"❌ Server error when adding product. Check console for network issues or backend errors.\");console.error(\"Add product error:\",err.response?err.response.data:err.message);}};/**\n   * Handles deletion of a product.\n   * @param {string} id - The ID of the product to delete.\n   */const handleDelete=async id=>{// Confirmation dialog before deleting\nif(!window.confirm(\"Are you sure you want to delete this product? This action cannot be undone.\"))return;try{await axios.delete(\"\".concat(API_BASE_URL,\"/product/\").concat(id));// Filter out the deleted product from both local and global states\nconst updated=localProducts.filter(p=>p.id!==id);setLocalProducts(updated);setProducts(updated);setMessage(\"Product deleted successfully.\");}catch(err){alert(\"Failed to delete product.\");// Use alert for simplicity, consider modal\nconsole.error(\"Delete product error:\",err);setMessage(\"❌ Failed to delete product.\");}};// Conditional rendering for admin panel based on loading/error states\nif(loading)return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-10 text-xl text-blue-600\",children:\"Loading admin panel products...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-10 text-xl text-red-500\",children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto mt-10 p-8 bg-white shadow-xl rounded-lg border-t-4 border-green-500\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-6 text-center\",children:\"Admin Panel\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"flex flex-col sm:flex-row gap-4 mb-6\",children:[/*#__PURE__*/_jsx(\"input\",{value:link,onChange:e=>setLink(e.target.value),placeholder:\"Paste Amazon product URL here...\",className:\"flex-1 border border-gray-300 px-4 py-3 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition duration-200\",required:true// HTML5 validation: field is required\n,\"aria-label\":\"Amazon Product URL\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-md\",children:\"Add Product\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600 text-center\",children:message}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mt-8 border-b pb-2 mb-6\",children:\"Current Products:\"}),localProducts.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-4 text-gray-600\",children:\"No products in the database. Add one using the form above!\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-6\",children:localProducts.map(p=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 shadow-md rounded-lg p-4 relative flex flex-col items-center border border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(p.id),className:\"absolute top-2 right-2 text-red-500 hover:text-red-700 p-1 rounded-full bg-white hover:bg-red-100 transition duration-200\",title:\"Delete Product\",\"aria-label\":\"Delete \".concat(p.title),children:\"\\uD83D\\uDDD1\\uFE0F\"}),/*#__PURE__*/_jsx(\"img\",{src:p.image,alt:p.title,className:\"w-32 h-auto mx-auto mb-3 rounded-md shadow-sm\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-md font-bold text-center mb-1\",children:p.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 font-semibold text-center mb-3\",children:p.price}),/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(p.id),className:\"block text-center text-blue-600 hover:underline text-sm\",children:\"View Details\"})]},p.id))})]});};/**\n * Main App Component\n * Manages global state (products) and routes.\n */function App(){const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);// Loading state for initial product fetch\nconst[error,setError]=useState(null);// Error state for initial product fetch\nconst location=useLocation();// Hook for current URL location\nconst token=new URLSearchParams(location.search).get(\"token\");// Get token from URL for admin access\nuseEffect(()=>{// Initial fetch of all products when the app loads\nsetLoading(true);setError(null);axios.get(\"\".concat(API_BASE_URL,\"/products\")).then(res=>{// Validate that the response is an array before setting state\nif(Array.isArray(res.data)){setProducts(res.data);}else{console.error(\"Backend /products did not return an array for main page:\",res.data);setError(\"Error: Expected product list but received unexpected data from server. Check console.\");setProducts([]);// Ensure products is an empty array to prevent rendering issues\n}}).catch(err=>{console.error(\"Error fetching initial products for main page:\",err);setError(\"Failed to load products. Please check your internet connection or server status.\");}).finally(()=>{setLoading(false);// End loading regardless of success or failure\n});},[]);// Empty dependency array means this effect runs once on initial component mount\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 font-sans text-gray-800\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto p-6\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"flex justify-between items-center mb-8 bg-white p-4 rounded-lg shadow-sm\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-extrabold text-blue-700\",children:\"Affiliate Products\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin-login\",className:\"text-blue-600 hover:text-blue-800 font-medium transition duration-200 hover:underline\",children:\"Admin Login\"})]}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-10 text-xl text-blue-600\",children:\"Loading products...\"}):error?/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-10 text-xl text-red-500\",children:error}):/*#__PURE__*/_jsx(ProductList,{products:products}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-center text-gray-500 mt-12 p-4 bg-white rounded-lg shadow-sm\",children:\"As an Amazon Associate, I earn from qualifying purchases.\"})]})}),/*#__PURE__*/_jsx(Route,{path:\"/product/:productId\",element:/*#__PURE__*/_jsx(ProductPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin-login\",element:/*#__PURE__*/_jsx(AdminLogin,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:token===ADMIN_TOKEN?/*#__PURE__*/_jsx(AdminPage,{setProducts:setProducts}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-10 text-2xl text-red-600 font-bold\",children:\"Access Denied: Not authorized. Please login as admin.\"})})]})});}/**\n * RootApp Component\n * Wraps the main App component with BrowserRouter for routing.\n * This is the component you should render in your index.js or main.js.\n */export default function RootApp(){return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(App,{})});}","map":{"version":3,"names":["React","useState","useEffect","axios","BrowserRouter","Router","Routes","Route","Link","useParams","useNavigate","useLocation","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","ADMIN_TOKEN","ProductList","_ref","products","length","className","children","map","p","src","image","alt","title","price","to","concat","id","ProductPage","productId","product","setProduct","loading","setLoading","error","setError","get","then","res","data","catch","err","console","finally","href","url","target","rel","review","AdminLogin","password","setPassword","navigate","handleLogin","e","preventDefault","alert","onSubmit","type","value","onChange","placeholder","AdminPage","_ref2","setProducts","link","setLink","message","setMessage","localProducts","setLocalProducts","fetchProducts","Array","isArray","handleSubmit","post","prev","detail","response","handleDelete","window","confirm","delete","updated","filter","required","onClick","App","location","token","URLSearchParams","search","path","element","RootApp"],"sources":["C:/Users/jrbri/Documents/git/AmazonAffiliateApp/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport {\n  BrowserRouter as Router,\n  Routes,\n  Route,\n  Link,\n  useParams,\n  useNavigate,\n  useLocation,\n} from \"react-router-dom\";\n\n// IMPORTANT: API_BASE_URL is set to your local network IP and backend port (8000).\n// This will ONLY work if the device accessing the React app (your phone, Mac)\n// is on the SAME WI-FI NETWORK as the computer running your FastAPI backend.\n//\n// If you want your website to work for people OFF your local network,\n// you MUST deploy your FastAPI backend to a public server (e.g., a VPS)\n// and update this URL to your public server's IP or domain (e.g., https://api.jamiesamazon.deals).\nconst API_BASE_URL = \"http://192.168.0.156:8000\"; // <--- Updated based on your local IP and backend port\n\n// Admin token for a simple login mechanism. In a real application,\n// this would be replaced by a more secure authentication system (e.g., JWT).\nconst ADMIN_TOKEN = \"letmein\";\n\n/**\n * ProductList Component\n * Displays a grid of product cards.\n * @param {Object} props - Component props.\n * @param {Array<Object>} props.products - An array of product objects to display.\n */\nconst ProductList = ({ products }) => {\n  // If no products are available or the products array is empty, display a message.\n  if (!products || products.length === 0) {\n    return <p className=\"text-center mt-8 text-gray-600\">No products found. Add some from the Admin panel!</p>;\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mt-8\">\n      {products.map((p) => (\n        <div\n          key={p.id} // Unique key for list rendering, important for React performance\n          className=\"bg-white shadow-md rounded-lg p-4 flex flex-col items-center relative\"\n        >\n          <img src={p.image} alt={p.title} className=\"w-40 h-auto mb-4 rounded-md\" />\n          <h3 className=\"text-lg font-semibold text-center mt-2\">{p.title}</h3>\n          <p className=\"text-green-600 font-bold my-2\">{p.price}</p>\n          <Link\n            to={`/product/${p.id}`} // Link to the detailed product page\n            className=\"mt-auto bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-full transition duration-300 ease-in-out transform hover:scale-105\"\n          >\n            View Product\n          </Link>\n        </div>\n      ))}\n    </div>\n  );\n};\n\n/**\n * ProductPage Component\n * Displays detailed information for a single product.\n */\nconst ProductPage = () => {\n  const { productId } = useParams(); // Get product ID from URL parameters\n  const [product, setProduct] = useState(null);\n  const [loading, setLoading] = useState(true); // State to manage loading status\n  const [error, setError] = useState(null); // State to manage error messages\n\n  useEffect(() => {\n    // Effect hook to fetch product data when component mounts or productId changes\n    setLoading(true); // Set loading to true before fetching\n    setError(null); // Clear any previous errors\n\n    axios.get(`${API_BASE_URL}/product/${productId}`)\n      .then((res) => {\n        // Check if the response contains an error field from the backend\n        if (res.data && res.data.error) {\n          setError(res.data.error);\n        } else {\n          setProduct(res.data); // Set product data if successful\n        }\n      })\n      .catch((err) => {\n        // Catch network or API call errors\n        console.error(\"Error fetching product details:\", err);\n        setError(\"Failed to load product details. Please try again later.\");\n      })\n      .finally(() => {\n        setLoading(false); // Set loading to false once fetch is complete (success or error)\n      });\n  }, [productId]); // Dependency array: re-run effect if productId changes\n\n  // Conditional rendering based on loading, error, or product data\n  if (loading) return <p className=\"text-center mt-10 text-xl text-blue-600\">Loading product details...</p>;\n  if (error) return <p className=\"text-center mt-10 text-xl text-red-500\">{error}</p>;\n  if (!product) return <p className=\"text-center mt-10 text-xl text-gray-600\">Product not found.</p>;\n\n  return (\n    <div className=\"max-w-2xl mx-auto mt-10 p-6 bg-white shadow-xl rounded-lg border-t-4 border-blue-500\">\n      <h2 className=\"text-3xl font-extrabold text-gray-800 mb-4 text-center\">{product.title}</h2>\n      <img\n        src={product.image}\n        alt={product.title}\n        className=\"w-full max-w-xs mx-auto mb-6 rounded-lg shadow-md\"\n      />\n      <p className=\"text-2xl text-green-700 font-bold mb-6 text-center\">{product.price}</p>\n      <a\n        href={product.url}\n        target=\"_blank\"\n        rel=\"noreferrer noopener\" // Added noopener for security best practice\n        className=\"block text-center bg-orange-600 hover:bg-orange-700 text-white py-3 px-6 rounded-full font-semibold text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-lg\"\n      >\n        Buy on Amazon\n      </a>\n      <p className=\"text-xs text-center text-gray-500 mt-4\">\n        As an Amazon Associate, I earn from qualifying purchases.\n      </p>\n\n      {product.review && (\n        <div className=\"mt-8 bg-yellow-50 p-5 rounded-lg border border-yellow-200 shadow-inner\">\n          <p className=\"text-sm text-gray-800 italic leading-relaxed\">\"{product.review}\"</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\n/**\n * AdminLogin Component\n * Provides a simple password-based login for the admin panel.\n */\nconst AdminLogin = () => {\n  const [password, setPassword] = useState(\"\");\n  const navigate = useNavigate(); // Hook for programmatic navigation\n\n  const handleLogin = (e) => {\n    e.preventDefault(); // Prevent default form submission\n    if (password === ADMIN_TOKEN) {\n      // Navigate to admin panel, passing the token as a URL parameter\n      navigate(\"/admin?token=\" + ADMIN_TOKEN);\n    } else {\n      // Use an alert for simplicity, consider a custom modal for better UX\n      alert(\"Incorrect password.\");\n    }\n  };\n\n  return (\n    <div className=\"max-w-md mx-auto mt-20 p-8 bg-white shadow-xl rounded-lg border-t-4 border-purple-500\">\n      <h2 className=\"text-2xl font-bold text-gray-800 mb-6 text-center\">Admin Login</h2>\n      <form onSubmit={handleLogin} className=\"space-y-4\">\n        <input\n          type=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          placeholder=\"Enter admin password\"\n          className=\"w-full border border-gray-300 px-4 py-3 rounded-lg focus:ring-2 focus:ring-purple-400 focus:border-transparent transition duration-200\"\n          aria-label=\"Admin Password\"\n        />\n        <button\n          type=\"submit\"\n          className=\"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-semibold text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-md\"\n        >\n          Login\n        </button>\n      </form>\n    </div>\n  );\n};\n\n/**\n * AdminPage Component\n * Allows adding and deleting products.\n * @param {Object} props - Component props.\n * @param {Function} props.setProducts - Function to update the main products state in App.\n */\nconst AdminPage = ({ setProducts }) => {\n  const [link, setLink] = useState(\"\");\n  const [message, setMessage] = useState(\"\"); // Feedback message for user actions\n  const [localProducts, setLocalProducts] = useState([]); // Products specific to admin view\n  const [loading, setLoading] = useState(true); // Loading state for admin products\n  const [error, setError] = useState(null); // Error state for admin products\n\n  /**\n   * Fetches products from the backend for the admin panel.\n   */\n  const fetchProducts = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await axios.get(`${API_BASE_URL}/products`);\n      // Validate that the response data is an array\n      if (Array.isArray(res.data)) {\n        setLocalProducts(res.data); // Update local state for admin view\n        setProducts(res.data);     // Update global state for main product list\n      } else {\n        console.error(\"Backend /products did not return an array for admin panel:\", res.data);\n        setError(\"Error: Expected product list but received unexpected data.\");\n        setLocalProducts([]); // Ensure array is empty to prevent rendering errors\n      }\n    } catch (err) {\n      console.error(\"Failed to fetch products for admin panel:\", err);\n      setError(\"Failed to load products. Check server connection and console for details.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Effect hook to fetch products when the component mounts\n  useEffect(() => {\n    fetchProducts();\n  }, []); // Empty dependency array means this runs once on mount\n\n  /**\n   * Handles submission of a new product link.\n   * @param {Event} e - The form submission event.\n   */\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!link) {\n      setMessage(\"Please enter an Amazon product URL.\");\n      return;\n    }\n    setMessage(\"Adding product... This may take a moment as the product details are being fetched.\"); // Provide immediate feedback\n    try {\n      const res = await axios.post(`${API_BASE_URL}/add-product`, {\n        url: link,\n      });\n      if (res.data && !res.data.error) {\n        // Add new product to the beginning of the list\n        setLocalProducts((prev) => [res.data, ...prev]);\n        setProducts((prev) => [res.data, ...prev]);\n        setLink(\"\"); // Clear the input field\n        setMessage(\"✅ Product added successfully!\");\n      } else {\n        // Display specific error message from backend if available\n        setMessage(`❌ Failed to add product: ${res.data.detail || res.data.error || 'Unknown error'}`);\n      }\n    } catch (err) {\n      setMessage(\"❌ Server error when adding product. Check console for network issues or backend errors.\");\n      console.error(\"Add product error:\", err.response ? err.response.data : err.message);\n    }\n  };\n\n  /**\n   * Handles deletion of a product.\n   * @param {string} id - The ID of the product to delete.\n   */\n  const handleDelete = async (id) => {\n    // Confirmation dialog before deleting\n    if (!window.confirm(\"Are you sure you want to delete this product? This action cannot be undone.\")) return;\n    try {\n      await axios.delete(`${API_BASE_URL}/product/${id}`);\n      // Filter out the deleted product from both local and global states\n      const updated = localProducts.filter((p) => p.id !== id);\n      setLocalProducts(updated);\n      setProducts(updated);\n      setMessage(\"Product deleted successfully.\");\n    } catch (err) {\n      alert(\"Failed to delete product.\"); // Use alert for simplicity, consider modal\n      console.error(\"Delete product error:\", err);\n      setMessage(\"❌ Failed to delete product.\");\n    }\n  };\n\n  // Conditional rendering for admin panel based on loading/error states\n  if (loading) return <p className=\"text-center mt-10 text-xl text-blue-600\">Loading admin panel products...</p>;\n  if (error) return <p className=\"text-center mt-10 text-xl text-red-500\">{error}</p>;\n\n  return (\n    <div className=\"max-w-6xl mx-auto mt-10 p-8 bg-white shadow-xl rounded-lg border-t-4 border-green-500\">\n      <h2 className=\"text-2xl font-bold text-gray-800 mb-6 text-center\">Admin Panel</h2>\n      <form onSubmit={handleSubmit} className=\"flex flex-col sm:flex-row gap-4 mb-6\">\n        <input\n          value={link}\n          onChange={(e) => setLink(e.target.value)}\n          placeholder=\"Paste Amazon product URL here...\"\n          className=\"flex-1 border border-gray-300 px-4 py-3 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition duration-200\"\n          required // HTML5 validation: field is required\n          aria-label=\"Amazon Product URL\"\n        />\n        <button\n          type=\"submit\"\n          className=\"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-md\"\n        >\n          Add Product\n        </button>\n      </form>\n      <p className=\"mt-2 text-sm text-gray-600 text-center\">{message}</p>\n\n      <h3 className=\"text-lg font-semibold mt-8 border-b pb-2 mb-6\">Current Products:</h3>\n      {localProducts.length === 0 ? (\n        <p className=\"text-center mt-4 text-gray-600\">No products in the database. Add one using the form above!</p>\n      ) : (\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-6\">\n          {localProducts.map((p) => (\n            <div\n              key={p.id}\n              className=\"bg-gray-50 shadow-md rounded-lg p-4 relative flex flex-col items-center border border-gray-200\"\n            >\n              <button\n                onClick={() => handleDelete(p.id)}\n                className=\"absolute top-2 right-2 text-red-500 hover:text-red-700 p-1 rounded-full bg-white hover:bg-red-100 transition duration-200\"\n                title=\"Delete Product\"\n                aria-label={`Delete ${p.title}`}\n              >\n                🗑️\n              </button>\n              <img\n                src={p.image}\n                alt={p.title}\n                className=\"w-32 h-auto mx-auto mb-3 rounded-md shadow-sm\"\n              />\n              <h3 className=\"text-md font-bold text-center mb-1\">{p.title}</h3>\n              <p className=\"text-green-600 font-semibold text-center mb-3\">{p.price}</p>\n              <Link\n                to={`/product/${p.id}`}\n                className=\"block text-center text-blue-600 hover:underline text-sm\"\n              >\n                View Details\n              </Link>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\n/**\n * Main App Component\n * Manages global state (products) and routes.\n */\nfunction App() {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true); // Loading state for initial product fetch\n  const [error, setError] = useState(null); // Error state for initial product fetch\n  const location = useLocation(); // Hook for current URL location\n  const token = new URLSearchParams(location.search).get(\"token\"); // Get token from URL for admin access\n\n  useEffect(() => {\n    // Initial fetch of all products when the app loads\n    setLoading(true);\n    setError(null);\n    axios.get(`${API_BASE_URL}/products`)\n      .then((res) => {\n        // Validate that the response is an array before setting state\n        if (Array.isArray(res.data)) {\n          setProducts(res.data);\n        } else {\n          console.error(\"Backend /products did not return an array for main page:\", res.data);\n          setError(\"Error: Expected product list but received unexpected data from server. Check console.\");\n          setProducts([]); // Ensure products is an empty array to prevent rendering issues\n        }\n      })\n      .catch((err) => {\n        console.error(\"Error fetching initial products for main page:\", err);\n        setError(\"Failed to load products. Please check your internet connection or server status.\");\n      })\n      .finally(() => {\n        setLoading(false); // End loading regardless of success or failure\n      });\n  }, []); // Empty dependency array means this effect runs once on initial component mount\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 font-sans text-gray-800\">\n      <Routes>\n        <Route\n          path=\"/\"\n          element={\n            <div className=\"max-w-6xl mx-auto p-6\">\n              <header className=\"flex justify-between items-center mb-8 bg-white p-4 rounded-lg shadow-sm\">\n                <h1 className=\"text-3xl font-extrabold text-blue-700\">Affiliate Products</h1>\n                <Link\n                  to=\"/admin-login\"\n                  className=\"text-blue-600 hover:text-blue-800 font-medium transition duration-200 hover:underline\"\n                >\n                  Admin Login\n                </Link>\n              </header>\n\n              {/* Conditional rendering for loading, error, or product list */}\n              {loading ? (\n                <p className=\"text-center mt-10 text-xl text-blue-600\">Loading products...</p>\n              ) : error ? (\n                <p className=\"text-center mt-10 text-xl text-red-500\">{error}</p>\n              ) : (\n                <ProductList products={products} />\n              )}\n\n              <p className=\"text-xs text-center text-gray-500 mt-12 p-4 bg-white rounded-lg shadow-sm\">\n                As an Amazon Associate, I earn from qualifying purchases.\n              </p>\n            </div>\n          }\n        />\n        {/* Route for individual product pages */}\n        <Route path=\"/product/:productId\" element={<ProductPage />} />\n        {/* Route for admin login page */}\n        <Route path=\"/admin-login\" element={<AdminLogin />} />\n        {/* Protected route for admin panel, checks for token */}\n        <Route\n          path=\"/admin\"\n          element={\n            token === ADMIN_TOKEN ? (\n              <AdminPage setProducts={setProducts} />\n            ) : (\n              <p className=\"text-center mt-10 text-2xl text-red-600 font-bold\">Access Denied: Not authorized. Please login as admin.</p>\n            )\n          }\n        />\n      </Routes>\n    </div>\n  );\n}\n\n/**\n * RootApp Component\n * Wraps the main App component with BrowserRouter for routing.\n * This is the component you should render in your index.js or main.js.\n */\nexport default function RootApp() {\n  return (\n    <Router>\n      <App />\n    </Router>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}